#!/bin/bash

# Exit immediately on error
set -e

echo "üîß Checking for socat..."

if ! command -v socat &> /dev/null
then
    echo "‚ö†Ô∏è socat not found. Installing..."

    # Detect platform
    if [ "$(uname)" == "Darwin" ]; then
        # macOS
        if command -v brew &> /dev/null; then
            brew install socat
        else
            echo "‚ùå Homebrew is not installed. Please install it first: https://brew.sh/"
            exit 1
        fi
    elif [ -f /etc/debian_version ]; then
        # Debian/Ubuntu
        sudo apt update
        sudo apt install -y socat
    elif [ -f /etc/redhat-release ]; then
        # Red Hat/Fedora
        sudo dnf install -y socat
    else
        echo "‚ùå Unsupported OS. Please install socat manually."
        exit 1
    fi
else
    echo "‚úÖ socat is already installed."
fi
